"use strict";(self.webpackChunkFreshCartEcommerce=self.webpackChunkFreshCartEcommerce||[]).push([[848],{848:(h,u,o)=>{o.r(u),o.d(u,{AllordersComponent:()=>O});var c=o(6814),_=o(1120),g=o(4885),t=o(4769),d=o(2623);function x(r,a){if(1&r&&(t.TgZ(0,"div",15)(1,"div",16),t._UZ(2,"img",17),t.qZA(),t.TgZ(3,"div",18)(4,"div",19)(5,"div",20)(6,"h3",21),t._uU(7),t.ALo(8,"cutText"),t.qZA(),t.TgZ(9,"span",22),t._uU(10),t.qZA(),t.TgZ(11,"span",22),t._uU(12),t.qZA()()()()()),2&r){const e=a.index,s=t.oxw().index,l=t.oxw(2);t.xp6(2),t.Q6J("src",l.ordersDetails[s].cartItems[e].product.imageCover,t.LSH),t.xp6(5),t.Oqu(t.xi3(8,4,l.ordersDetails[s].cartItems[e].product.title,3)),t.xp6(3),t.hij("Quantity: ",l.ordersDetails[s].cartItems[e].count,""),t.xp6(2),t.hij("Price: ",l.ordersDetails[s].cartItems[e].price+" EGP","")}}const n=function(r,a){return{"badge bg-success":r,"badge bg-danger":a}},i=function(r,a){return{badge:!0,"bg-success":r,"bg-danger":a}};function m(r,a){if(1&r&&(t.TgZ(0,"div",6)(1,"h3",7),t._uU(2),t.qZA(),t.YNc(3,x,13,7,"div",8),t.TgZ(4,"div",9)(5,"div",10)(6,"h3",11),t._uU(7,"Order Status"),t.qZA(),t._UZ(8,"hr"),t.TgZ(9,"p",12),t._uU(10,"Is Delivered: "),t.TgZ(11,"span",13),t._uU(12),t.qZA()(),t.TgZ(13,"p",12),t._uU(14,"Is Paid: "),t.TgZ(15,"span",13),t._uU(16),t.qZA()(),t.TgZ(17,"p",12),t._uU(18,"Payment Method Type: "),t.TgZ(19,"span",14),t._uU(20),t.qZA()(),t.TgZ(21,"p",12),t._uU(22,"Total Order Price: "),t.TgZ(23,"span",14),t._uU(24),t.qZA()()()()()),2&r){const e=a.index,s=t.oxw(2);t.xp6(2),t.hij("Order : ",e+1,""),t.xp6(1),t.Q6J("ngForOf",s.ordersDetails[e].cartItems),t.xp6(8),t.Q6J("ngClass",t.WLB(8,n,s.ordersDetails[e].isDelivered,!s.ordersDetails[e].isDelivered)),t.xp6(1),t.Oqu(s.ordersDetails[e].isDelivered?"Yes":"No"),t.xp6(3),t.Q6J("ngClass",t.WLB(11,i,s.ordersDetails[e].isPaid,!s.ordersDetails[e].isPaid)),t.xp6(1),t.Oqu(s.ordersDetails[e].isPaid?"Yes":"No"),t.xp6(4),t.Oqu(s.ordersDetails[e].paymentMethodType),t.xp6(4),t.Oqu(s.ordersDetails[e].totalOrderPrice+" EGP")}}function p(r,a){if(1&r&&(t.TgZ(0,"section",2)(1,"button",3),t._uU(2,"Back To Home"),t.qZA(),t.TgZ(3,"h2",4),t._uU(4,"All Orders"),t.qZA(),t.YNc(5,m,25,14,"div",5),t.ALo(6,"slice"),t.qZA()),2&r){const e=t.oxw();t.xp6(5),t.Q6J("ngForOf",t.Dn7(6,1,e.ordersDetails,0,3))}}function C(r,a){1&r&&(t.TgZ(0,"h2",23),t._uU(1,"Your Orders is Empty..."),t.qZA())}let O=(()=>{class r{constructor(e){this._CartService=e,this.ordersDetails=null}ngOnInit(){this.getOrders()}getOrders(){this._CartService.getAllOrders().subscribe({next:e=>{this.ordersDetails=e.data}})}static#t=this.\u0275fac=function(s){return new(s||r)(t.Y36(d.N))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-allorders"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","w-75 mx-auto rounded shadow p-4 bg-main-light marginY",4,"ngIf","ngIfElse"],["msg",""],[1,"w-75","mx-auto","rounded","shadow","p-4","bg-main-light","marginY"],["routerLink","/home",1,"btn","btn-outline-secondary","my-3"],[1,"text-center","fw-bold","text-main"],["class","row border rounded m-2 p-2",4,"ngFor","ngForOf"],[1,"row","border","rounded","m-2","p-2"],[1,"h2","badge","bg-main"],["class","px-3 d-flex align-items-center mt-3 phone-response",4,"ngFor","ngForOf"],[1,"container-fluid"],[1,"border","border-dark","rounded","p-1","my-3"],[1,"text-center","h4","mb-0","fw-bold","text-dark"],[1,"mb-2","small","ps-3"],[3,"ngClass"],[1,"badge","bg-main"],[1,"px-3","d-flex","align-items-center","mt-3","phone-response"],[1,"col-sm-4"],["alt","",1,"w-100","pe-3",3,"src"],[1,"col-sm-8"],[1,"product-info"],[1,"d-flex","flex-column"],[1,"text-main","h5"],[1,"fw-bold","h6"],[1,"text-center","my-5"]],template:function(s,l){if(1&s&&(t.YNc(0,p,7,5,"section",0),t.YNc(1,C,2,0,"ng-template",null,1,t.W1O)),2&s){const f=t.MAs(2);t.Q6J("ngIf",l.ordersDetails)("ngIfElse",f)}},dependencies:[c.ez,c.mk,c.sg,c.O5,c.OU,g.Q,_.rH],styles:[".marginY[_ngcontent-%COMP%]{margin:5rem 0}@media screen and (max-width: 576px){.phone-response[_ngcontent-%COMP%]{padding:0!important}section[_ngcontent-%COMP%]{width:100%!important}.col-sm-4[_ngcontent-%COMP%]{width:40%!important}}"]})}return r})()},2623:(h,u,o)=>{o.d(u,{N:()=>t});var c=o(5619),_=o(4769),g=o(9862);let t=(()=>{class d{constructor(n){this._HttpClient=n,this.baseUrl="https://ecommerce.routemisr.com/api/v1/",this.cartItemNumber=new c.X(0)}addToCart(n){return this._HttpClient.post(this.baseUrl+"cart",{productId:n})}getUserCart(){return this._HttpClient.get(this.baseUrl+"cart")}removeFromCart(n){return this._HttpClient.delete(this.baseUrl+`cart/${n}`)}updateCartCount(n,i){return this._HttpClient.put(this.baseUrl+`cart/${n}`,{count:i})}clearFromCart(){return this._HttpClient.delete(this.baseUrl+"cart")}getAllOrders(){return this._HttpClient.get(this.baseUrl+"orders")}checkOut(n,i){return this._HttpClient.post(this.baseUrl+`orders/checkout-session/${n}?url=https://ecommerce-website-mohamed-mosad.vercel.app`,{shippingAddress:i})}getCount(){this.getUserCart().subscribe({next:n=>{const i=n.data.products;let m=0;for(let p=0;p<i.length;p++)m+=i[p].count;this.cartItemNumber.next(m)}})}static#t=this.\u0275fac=function(i){return new(i||d)(_.LFG(g.eN))};static#e=this.\u0275prov=_.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()}}]);